//===============================================================================================
// update history
//===============================================================================================

//-----------------------------------------------------------------------------------------------
// 2022/03/28
//-----------------------------------------------------------------------------------------------
// 1. fix pixel DN MAX (1021 -> 1023)
// 2. fix RFPN: ramp_clk freq half slow, gain half 

//-----------------------------------------------------------------------------------------------
// 2022/03/18
//-----------------------------------------------------------------------------------------------
// 1. adjust comparator bias
// 2. adjust ramp offset
// 3. adjust expo_intg_max (for SW:20220318)

//-----------------------------------------------------------------------------------------------
// 2022/02/11
//-----------------------------------------------------------------------------------------------
// initial version

//===============================================================================================
// platform
//===============================================================================================
Version = T7806_initial_version

[Sensor]
SensorName = T7806

[ParaList]
//===============================================================================================
// FORMAT: 1A1D=0x05; 1A2D=0x06; 2A1D=0x07; 2A2D=0x08; 0A2D=0x0A; 0A1D=0x0C
//===============================================================================================
FORMAT 05

//===============================================================================================
// T7806
//===============================================================================================
RESET

//===============================================================================================
// sensor/power & clocking (!!! Donâ€™t change command order !!!)
//===============================================================================================

// ** BANK 6 **
W 00 06

//-----------------------------------------------------------------------------------------------
// bandgap startup 
//-----------------------------------------------------------------------------------------------
W 32 47
//-----------------------------------------------------------------------------------------------
// OSC freq. setting (52MHz)
//-----------------------------------------------------------------------------------------------
W 40 13
W 50 01

// wait for OSC freq update to complete (10ms)
S 10

//-----------------------------------------------------------------------------------------------
// comprator bias
//-----------------------------------------------------------------------------------------------
W 33 1F

//-----------------------------------------------------------------------------------------------
// IOVDD @ BK6:0x3B
//-----------------------------------------------------------------------------------------------
// IOVDD = 1.2V => 0001_0001
// IOVDD = 1.8V => 0010_0000 (v)
// IOVDD = AVDD => 0100_0010 
//-----------------------------------------------------------------------------------------------
W 3B 20

//-----------------------------------------------------------------------------------------------
// VBOOST(AVDD_PIX/VDDQ) mode @ BK6:0x46[1:0]
//-----------------------------------------------------------------------------------------------
// AVDD = 2.8V => 0
// AVDD = 3.3V => 1 (v)
// OTP program => 2 or 3
//-----------------------------------------------------------------------------------------------
// VBOOST switch by AVDD @ BK6:0x46[2]
//-----------------------------------------------------------------------------------------------
// manual => 0 (v)
// auto   => 1
//-----------------------------------------------------------------------------------------------
W 46 01

//-----------------------------------------------------------------------------------------------
// OTP power: switch to VDD
//-----------------------------------------------------------------------------------------------
W 39 05

//===============================================================================================
// sensor/timing
//===============================================================================================

// ** BANK 2 **
W 00 02

// reg_hscan_ph0_len = 105 (x2)
W 11 69

// reg_hscan_ph2_len = 420
W 14 01
W 15 A4

// reg_hscan_ph3_len = 69 (x2) 
W 17 45

// reg_grst_rst_ph0_t0 = 78
W 21 4E

// reg_gtx_ph0_t0 = 4
W 23 4

// reg_gtx_ph0_t1 = 58
W 25 3A

// reg_gtx_ph3_t0 = 80
W 27 50

// reg_gtx_ph3_t1 = 134
W 29 86

// reg_gfd_rst_ph0_t0 = 68
W 2B 44

// reg_gfd_rst_ph3_t0 = 20
W 2D 14

// reg_gfd_rst_ph3_t1 = 72
W 2F 48

// reg_gtx_rst_ph0_t0 = 8
W 33 08

// reg_gtx_rst_ph0_t1 = 48
W 35 30

// reg_gtx_rst_ph3_t0 = 24
W 37 18

// reg_gtx_rst_ph3_t1 = 64
W 39 40

// reg_rst_reset_ph0_t0 = 100
W 3B 64

// reg_comp_rst2_ph0_t0 = 93 (x2)
W 3D 5D

// reg_comp_rst3_ph0_t0 = 100 (x2)
W 3F 64

// reg_ramp_rst_ini_ph0_t0 = 24
W 41 18

// reg_ramp_rst_1_ph0_t0 = 36
W 43 24

// reg_ramp_rst_2_ph0_t0 = 26
W 45 1A

// reg_ramp_rst_2_ph0_t1 = 46 (x2)
W 46 2E

// reg_tx_read_en_ph2_t0 = 20 (x2)
W 51 14

// reg_tx_read_en_ph2_t1 = 61 (x2)
W 53 3D

// ** BANK 3 **
W 00 03

// reg_comp_out_en_ph2_t0 = 67 (x2)
W 15 43

// reg_comp_out_en_ph2_t1 = 415
W 16 01
W 17 9F

// reg_dout_en_ph2_t0 = 71 (x2)
W 1D 47

// reg_dout_en_ph2_t1 = 416
W 1E 01
W 1F A0

// reg_dac_ofts_ph2_str = 0 (x2)
W 21 0

// reg_dac_ofts_ph2_len = 4
W 22 00
W 23 10

// reg_dac_ramp_ph2_str = 77 (x2)
W 25 4D

// reg_dac_ramp_ph2_len = 512+1 (bug workaround)
W 26 02
W 27 01

// reg_dac_ctrl_ph0_t0 = 26
W 31 1A

// reg_dac_ctrl_ph2_t0 = 69 (x2)
W 37 45

// reg_dac_ctrl_ph2_t1 = 419
W 38 01
W 39 A3

// reg_dsft_all_ph3_t0 = 4
W 45 4

// reg_dsft_all_ph3_t1 = 16
W 47 10

// reg_dsft_all_len =  12
W 48 0C

// reg_dsft_sub_len = 2
W 49 02

// reg_dsft_sub_gap = 3
W 4A 03

// reg_vcm_gen_ph0_t0 = 22
W 51 16

// reg_vcm_sh_ph0_t0 = 21
W 53 15

//===============================================================================================
// sensor/control
//===============================================================================================

// ** BANK 1 **
W 00 01

// frame burst length @ BK1:0x11[7:0]
W 11 00

// sensor pixel format @ BK1:0x10[4]
// RAW10 => 0
// RAW8  => 1
W 10 00

// SPI pixel format @ BK1:0x13[0]
// RAW10 => 0
// RAW8  => 1
// SPI read out mode @ BK1:0x13[1]
// line  mode => 0
// frame mode => 1
W 13 02

// frame ROI: vertical   start @ BK1:0x26
// frame ROI: vertical   size  @ BK1:0x27
// frame ROI: horizontal start @ BK1:0x28
// frame ROI: horizontal size  @ BK1:0x29
W 26 00
W 27 C8
W 28 00
W 29 C8

// image test pattern type
W 42 00
W 44 00
W 45 20
W 46 F0

// image test pattern @ BK1:0x40[0]
// OFF => 0
// ON  => 1
// frame center 64x64 mean calculation @ BK1:0x40[5]
// OFF => 0
// ON  => 1
// frame boundary ring pixel counting @ BK1:0x40[6]
// OFF => 0
// ON  => 1
W 40 00

// ramp_clk freq: 0x17[5:4]
// 0: mclk/2
// 1: mclk/4
// 2: mclk/8
W 17 20

//===============================================================================================
// EV control
//===============================================================================================

// ** BANK 0 **
W 00 00

//-----------------------------------------------------------------------------------------------
// ADC gain (ramp gain) for sig        @ BK0:0x11
// ADC gain (ramp gain) for sig_offset @ BK0:0x12
//-----------------------------------------------------------------------------------------------
W 11 20
W 12 60

//-----------------------------------------------------------------------------------------------
// exposure MAX must be adjusted by statistics result (rpt_spi_rdo_len @ {BK0:0x05,BK0:0x06})
//-----------------------------------------------------------------------------------------------
// reg_ev_expo_intg_max @ {BK0:0x0A,BK0:0x0B}
W 0A 00
W 0B 60

// reg_ev_expo_intg @ {BK0:0x0C,BK0:0x0D}( < reg_ev_expo_intg_max ) 
W 0C 00
W 0D 40

//===============================================================================================
// kick start
//===============================================================================================

// kick start (control by platform SW tool)
//W 01 01



