//-----------------------------------------------------------------------------------------------
// update history
//-----------------------------------------------------------------------------------------------

//-----------------------------------------------------------------------------------------------
// 2020/11/4
//-----------------------------------------------------------------------------------------------
//    - Change AE configuration based on Robert's measure result
//      1. AE ROI window size
//      2. ADC offset for signal
//      3. ADC offset for rst
//      4. Exposure intg
//
//-----------------------------------------------------------------------------------------------
// 2020/10/22
//-----------------------------------------------------------------------------------------------
//    - sync timing with frame mode
//      and extend timing of PH0 into 4 times longer
//      (here main purpose is enlarge "rst_reset" pulse width)
//
//    - OSC up to 78MHz : 
//      H = 2864 (i.e 2864*1000/(78/2) = 73.435us < SPI 1 line time = 184*10*1000/24 = 76.667us), 
//      MAX_EXPO = 610 (i.e EXPO_TIME MAX up to 44.796ms)
//      NOTE: verified on SW_1.4/FW_0X7C/EVB_7805JMANV01
//
//-----------------------------------------------------------------------------------------------

//-----------------------------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------------------------
TY7868
RESET

//-----------------------------------------------------------------------------------------------
// page 01
//-----------------------------------------------------------------------------------------------
// sensor AE module = ON(1)/OFF(0)
// @ 0x10[0]
// sensor pixel format = 8bit(1)/10bit(0)
// @ 0x10[4]
W 01 10 00

// AE ROI window
W 01 22 4E      // vstr
W 01 23 3C      // vwin
W 01 24 30      // hstr
W 01 25 78      // hwin

// sensor normal frame burst length = N frame
// @ 0x11[7:0]
W 01 11 00

// AE frame sub-sampling = full_sz(0)/sub_2x2(1)/sub_4x4(2)
// @ 0x12[1:0]
// AE frame V binning X2 = ON(1)/OFF(0)
// @ 0x12[1]
//W 01 12 06

// SPI read out pixel format = 8bit(1)/10bit(0)
// @ 0x13[0]
// SPI read out mode = high-speed(1)/low-speed(0)
// @ 0x13[1]
W 01 13 00

// test pattern = ON(1)/OFF(0)
// @ 0x40[0]
// foot packet = ON(1)/OFF(0)
// @ 0x40[1]
//W 01 40 00

// normal frame window size are fixed at 184x184 by metal option
// normal frame window size (184x184 start from (16,16))
W 01 26 10
W 01 27 B8
W 01 28 10
W 01 29 B8

//-----------------------------------------------------------------------------------------------
// page 02
//-----------------------------------------------------------------------------------------------

// timing fix

// reg_fm_tim_cir_rst(PH0) = 1844
W 02 10 7
W 02 11 34

// reg_fm_tim_adc4rst(PH1) = 222
W 02 12 0
W 02 13 DE

// reg_fm_tim_adc4sig(PH2) = 660
W 02 14 2
W 02 15 94

// reg_fm_tim_datxfer(PH3) = 138
W 02 16 0
W 02 17 8A

// reg_grst_rst_ph0_t0 = 78
W 02 20 0
W 02 21 4E

// reg_gtx_ph0_t0 = 4
W 02 22 0
W 02 23 4

// reg_gtx_ph0_t1 = 58
W 02 24 0
W 02 25 3A

// reg_gfd_rst_ph0_t0 = 68
W 02 2A 0
W 02 2B 44

// reg_gtx_rst_ph0_t0 = 8
W 02 32 0
W 02 33 8

// reg_gtx_rst_ph0_t1 = 48
W 02 34 0
W 02 35 30

// reg_rst_reset_ph0_t0 = 1696
W 02 3A 6
W 02 3B A0

// reg_comp_rst2_ph0_t0 = 1796
W 02 3C 7
W 02 3D 4

// reg_comp_rst3_ph0_t0 = 1816
W 02 3E 7
W 02 3F 18

// reg_ramp_rst_ini_ph0_t0 = 24
W 02 40 0
W 02 41 18

// reg_ramp_rst_1_ph0_t0 = 36
W 02 42 0
W 02 43 24

// reg_ramp_rst_2_ph0_t0 = 26
W 02 44 0
W 02 45 1A

// reg_ramp_rst_2_ph2_t0 = 4
W 02 46 0
W 02 47 4

// reg_ramp_rst_2_ph2_t1 = 132
W 02 48 0
W 02 49 84

// reg_tx_read_en_ph2_t0 = 140
W 02 50 0
W 02 51 8C

// reg_tx_read_en_ph2_t1 = 222
W 02 52 0
W 02 53 DE

// reg_gtx_ph3_t0 = 80
W 02 26 0
W 02 27 50

// reg_gtx_ph3_t1 = 134
W 02 28 0
W 02 29 86

// reg_gfd_rst_ph3_t0 = 20
W 02 2C 0
W 02 2D 14

// reg_gfd_rst_ph3_t1 = 72
W 02 2E 0
W 02 2F 48

// reg_gtx_rst_ph3_t0 = 24
W 02 36 0
W 02 37 18

// reg_gtx_rst_ph3_t1 = 64
W 02 38 0
W 02 39 40

//-----------------------------------------------------------------------------------------------
// page 03
//-----------------------------------------------------------------------------------------------

// timing fix

// reg_adc_val_ph0_t0 = 26
W 03 30 0
W 03 31 1A

// reg_vcm_gen_ph0_t0 = 22
W 03 50 0
W 03 51 16

// reg_vcm_sh_ph0_t0 = 20
W 03 52 0
W 03 53 14

// reg_vcm_sh2_ph0_t0 = 231
W 03 56 0
W 03 57 E7

// reg_comp_out_en_ph1_t0 = 52
W 03 10 0
W 03 11 34

// reg_comp_out_en_ph1_t1 = 204
W 03 12 0
W 03 13 CC

// reg_dout_en_ph1_t0 = 60
W 03 18 0
W 03 19 3C

// reg_dout_en_ph1_t1 = 205
W 03 1A 0
W 03 1B CD

// reg_dac_en_ph1_str = 72
W 03 20 0
W 03 21 48

// reg_adc_ofst_en_ph1_t0 = 206
W 03 28 0
W 03 29 CE

// reg_dsft_rst_ph1_t0 = 210
W 03 40 0
W 03 41 D2

// reg_adc_val_ph1_t0 = 6
W 03 32 0
W 03 33 6

// reg_adc_val_ph1_t1 = 206
W 03 34 0
W 03 35 CE

// reg_vcm_gen2_ph1_t0 = 5
W 03 54 0
W 03 55 5

// reg_vcm_sh2_ph1_t0 = 4
W 03 58 0
W 03 59 4

// reg_comp_out_en_ph2_t0 = 234
W 03 14 0
W 03 15 EA

// reg_comp_out_en_ph2_t1 = 642
W 03 16 2
W 03 17 82

// reg_dout_en_ph2_t0 = 242
W 03 1C 0
W 03 1D F2

// reg_dout_en_ph2_t1 = 643
W 03 1E 2
W 03 1F 83

// reg_dac_en_ph2_str = 254
W 03 24 0
W 03 25 FE

// reg_adc_ofst_en_ph2_t0 = 254
W 03 2A 0
W 03 2B FE

// reg_adc_ofst_en_ph2_t1 = 644
W 03 2C 2
W 03 2D 84

// reg_dsft_sig_ph2_t0 = 648
W 03 42 2
W 03 43 88

// reg_adc_val_ph2_t0 = 138
W 03 36 0
W 03 37 8A

// reg_adc_val_ph2_t1 = 644
W 03 38 2
W 03 39 84

// reg_dsft_all_ph3_t0 = 4
W 03 44 0
W 03 45 4

// reg_dsft_all_ph3_t1 = 16
W 03 46 0
W 03 47 10

// reg_dsft_all_len =  12
W 03 48 C

// reg_dac_en_ph1_len = 256
W 03 22 1
W 03 23 0

// reg_dac_en_ph2_len = 768
W 03 26 3
W 03 27 0

//-----------------------------------------------------------------------------------------------
// page 06
//-----------------------------------------------------------------------------------------------
// AVDD_PIX = 2.5V
// AVDD     = 2.8V
// VCM      = 1.2V
W 06 30 11
W 06 35 FF

// low noise
W 06 31 3C  //dac_swing 75uA, ramp_pwr=0x100
W 06 33 1F
W 06 34 03

//-----------------------------------------------------------------------------------------------
// page 00
//-----------------------------------------------------------------------------------------------
// ADC offset for signal = 68
W 00 12 44
// ADC offset for rst = 66
W 00 14 42

// expo_intg_max = 610(0x264)
// @ {0x0A[7:0],0x0B[7:0]}
W 00 0A 02
W 00 0B 62

// expo_intg (<expo_intg_max)
// @ {0x0C[7:0],0x0D[7:0]}
W 00 0C 00
W 00 0D 64

//-----------------------------------------------------------------------------------------------
// kick start
//-----------------------------------------------------------------------------------------------
// OSC freq = 48+28(0x3C-0x1E) = 78MHz
W 06 40 3C
W 06 50 01

// kick start
//W 00 01 01

